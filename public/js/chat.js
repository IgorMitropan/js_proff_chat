!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="./public/",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var r=n(2),i=o(r),s=new i["default"]({element:document.getElementById("container")}),u=document.getElementById("logoutBtn");u&&u.addEventListener("click",s.signOut.bind(s)),window.onbeforeunload=s.leaveChat.bind(s)},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),s=r(i),u=n(4),a=r(u),c=n(8),l=o(c),f=n(11),d=r(f),h=n(68),p=r(h),v=n(88),_=r(v),m=n(89),y=r(m),g=n(90),b=r(g);l.installMatches(),l.installClosest(),l.installCustomEvent();var w=function(){function t(e){(0,s["default"])(this,t),this._el=e.element,this._contactList=new p["default"]({element:this._el.querySelector('[data-component="contactList"]')}),this._loadContactList(),this._messagesViewer=new _["default"]({element:this._el.querySelector('[data-component="messagesViewer"]')}),this._loadMessages(),this.socket=io(),this.socket.on("connect",this._onSocketConnected.bind(this)),this.socket.on("change user status",t._changeUserStatus.bind(this)),this.socket.on("leave",this._contactList.updateContactOffline.bind(this._contactList)),this.socket.on("join",this._contactList.updateContactsOnline.bind(this._contactList)),this.socket.on("message",this._messagesViewer.addMessage.bind(this._messagesViewer));var n=this._el.querySelector('[data-component="loginModal"]');n&&(this._loginModal=new b["default"]({element:n}),this._loginModal.on("signIn",this._signIn.bind(this)));var o=this._el.querySelector('[data-component="messageSender"]');o&&(this._messageSender=new y["default"]({element:o}),this._messageSender.on("send",this._sendMessage.bind(this)),this.socket.on("disconnect",this._onSocketDisconnected.bind(this)),this.socket.on("error saving message",this._messageSender.showLoadError.bind(this._messageSender)),this._messagesViewer.on("messageWasClicked",this._onMessageWasClicked.bind(this)),this._contactList.on("contactWasClicked",this._onContactWasClicked.bind(this)))}return(0,a["default"])(t,[{key:"signOut",value:function(e){e.preventDefault(),d["default"].ajax("/logout",{method:"POST"}).then(t._changeUserStatus).then(this.leaveChat.bind(this))}},{key:"leaveChat",value:function(){this.socket.emit("Contact has left")}},{key:"_signIn",value:function(e){d["default"].ajax("/login",{method:"POST",body:e.detail}).then(t._changeUserStatus,this._loginModal.showLoadError.bind(this._loginModal))}},{key:"_onSocketConnected",value:function(){this.socket.emit("Who is online?","",this._contactList.updateContactsOnline.bind(this._contactList)),this._messageSender&&(document.querySelector('[data-selector="status"]').textContent="You are online!",this._messageSender.activateInput())}},{key:"_onSocketDisconnected",value:function(){document.querySelector('[data-selector="status"]').textContent="Sorry, connection lost...",this._messageSender.disActivateInput()}},{key:"_sendMessage",value:function(t){this.socket.emit("message",t.detail.message,this._messageSender.resetText.bind(this._messageSender))}},{key:"_onContactWasClicked",value:function(t){this._messageSender.mentionContact(t.detail.contactName)}},{key:"_onMessageWasClicked",value:function(t){this._messageSender.quoteMessage(t.detail)}},{key:"_loadContactList",value:function(){d["default"].ajax("/contacts",{}).then(this._contactList.showContent.bind(this._contactList),this._contactList.showLoadError.bind(this._contactList))}},{key:"_loadMessages",value:function(){d["default"].ajax("/messages",{}).then(this._messagesViewer.showContent.bind(this._messagesViewer),this._messagesViewer.showLoadError.bind(this._messagesViewer))}}],[{key:"_changeUserStatus",value:function(){location.reload()}}]),t}();e["default"]=w},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(5),i=o(r);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,i["default"])(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}()},function(t,e,n){t.exports={"default":n(6),__esModule:!0}},function(t,e,n){var o=n(7);t.exports=function(t,e,n){return o.setDesc(t,e,n)}},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector)}function i(){Element.prototype.closest||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e=e.parentElement}return null})}function s(){try{new CustomEvent("IE has CustomEvent, but doesn't support constructor")}catch(t){window.CustomEvent=function(t,e){var n;return e=e||{bubbles:!1,cancelable:!1,detail:void 0},n=document.createEvent("CustomEvent"),n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n},CustomEvent.prototype=(0,a["default"])(window.Event.prototype)}}Object.defineProperty(e,"__esModule",{value:!0});var u=n(9),a=o(u);e.installMatches=r,e.installClosest=i,e.installCustomEvent=s},function(t,e,n){t.exports={"default":n(10),__esModule:!0}},function(t,e,n){var o=n(7);t.exports=function(t,e){return o.create(t,e)}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),i=o(r),s=n(15),u=o(s),a=n(3),c=o(a),l=n(4),f=o(l),d=function(){function t(){(0,c["default"])(this,t)}return(0,f["default"])(t,null,[{key:"ajax",value:function(t,e){return new u["default"](function(n,o){var r=new XMLHttpRequest,s=e.method||"GET",u=e.body?(0,i["default"])(e.body):"";r.open(s,t,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"===s&&r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.onload=function(){if(200===this.status||304===this.status)n(this.responseText);else{var t=new Error(this.responseText);t.code=this.status,console.error(t),o(t)}},r.onerror=function(){var t=new Error("Network Error");console.error(t),o(t)},r.send(u)})}}]),t}();e["default"]=d},function(t,e,n){t.exports={"default":n(13),__esModule:!0}},function(t,e,n){var o=n(14);t.exports=function(t){return(o.JSON&&o.JSON.stringify||JSON.stringify).apply(JSON,arguments)}},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports={"default":n(16),__esModule:!0}},function(t,e,n){n(17),n(18),n(40),n(47),t.exports=n(14).Promise},function(t,e){},function(t,e,n){"use strict";var o=n(19)(!0);n(22)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=o(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var o=n(20),r=n(21);t.exports=function(t){return function(e,n){var i,s,u=String(r(e)),a=o(n),c=u.length;return 0>a||a>=c?t?"":void 0:(i=u.charCodeAt(a),55296>i||i>56319||a+1===c||(s=u.charCodeAt(a+1))<56320||s>57343?t?u.charAt(a):i:t?u.slice(a,a+2):(i-55296<<10)+(s-56320)+65536)}}},function(t,e){var n=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var o=n(23),r=n(24),i=n(28),s=n(29),u=n(33),a=n(34),c=n(35),l=n(36),f=n(7).getProto,d=n(37)("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",_="values",m=function(){return this};t.exports=function(t,e,n,y,g,b,w){c(n,e,y);var x,S,k=function(t){if(!h&&t in O)return O[t];switch(t){case v:return function(){return new n(this,t)};case _:return function(){return new n(this,t)}}return function(){return new n(this,t)}},C=e+" Iterator",M=g==_,E=!1,O=t.prototype,j=O[d]||O[p]||g&&O[g],L=j||k(g);if(j){var P=f(L.call(new t));l(P,C,!0),!o&&u(O,p)&&s(P,d,m),M&&j.name!==_&&(E=!0,L=function(){return j.call(this)})}if(o&&!w||!h&&!E&&O[d]||s(O,d,L),a[e]=L,a[C]=m,g)if(x={values:M?L:k(_),keys:b?L:k(v),entries:M?k("entries"):L},w)for(S in x)S in O||i(O,S,x[S]);else r(r.P+r.F*(h||E),e,x);return x}},function(t,e){t.exports=!0},function(t,e,n){var o=n(25),r=n(14),i=n(26),s="prototype",u=function(t,e,n){var a,c,l,f=t&u.F,d=t&u.G,h=t&u.S,p=t&u.P,v=t&u.B,_=t&u.W,m=d?r:r[e]||(r[e]={}),y=d?o:h?o[e]:(o[e]||{})[s];d&&(n=e);for(a in n)c=!f&&y&&a in y,c&&a in m||(l=c?y[a]:n[a],m[a]=d&&"function"!=typeof y[a]?n[a]:v&&c?i(l,o):_&&y[a]==l?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[s]=t[s],e}(l):p&&"function"==typeof l?i(Function.call,l):l,p&&((m[s]||(m[s]={}))[a]=l))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,t.exports=u},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var o=n(27);t.exports=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){t.exports=n(29)},function(t,e,n){var o=n(7),r=n(30);t.exports=n(31)?function(t,e,n){return o.setDesc(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=!n(32)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports={}},function(t,e,n){"use strict";var o=n(7),r=n(30),i=n(36),s={};n(29)(s,n(37)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=o.create(s,{next:r(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var o=n(7).setDesc,r=n(33),i=n(37)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,i)&&o(t,i,{configurable:!0,value:e})}},function(t,e,n){var o=n(38)("wks"),r=n(39),i=n(25).Symbol;t.exports=function(t){return o[t]||(o[t]=i&&i[t]||(i||r)("Symbol."+t))}},function(t,e,n){var o=n(25),r="__core-js_shared__",i=o[r]||(o[r]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){var n=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+o).toString(36))}},function(t,e,n){n(41);var o=n(34);o.NodeList=o.HTMLCollection=o.Array},function(t,e,n){"use strict";var o=n(42),r=n(43),i=n(34),s=n(44);t.exports=n(22)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var o=n(45),r=n(21);t.exports=function(t){return o(r(t))}},function(t,e,n){var o=n(46);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==o(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var o,r=n(7),i=n(23),s=n(25),u=n(26),a=n(48),c=n(24),l=n(49),f=n(50),d=n(27),h=n(51),p=n(52),v=n(57).set,_=n(58),m=n(37)("species"),y=n(59),g=n(60),b="Promise",w=s.process,x="process"==a(w),S=s[b],k=function(t){var e=new S(function(){});return t&&(e.constructor=Object),S.resolve(e)===e},C=function(){function t(e){var n=new S(e);return v(n,t.prototype),n}var e=!1;try{if(e=S&&S.resolve&&k(),v(t,S),t.prototype=r.create(S.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&n(31)){var o=!1;S.resolve(r.setDesc({},"then",{get:function(){o=!0}})),e=o}}catch(i){e=!1}return e}(),M=function(t,e){return i&&t===S&&e===o?!0:_(t,e)},E=function(t){var e=f(t)[m];return void 0!=e?e:t},O=function(t){var e;return l(t)&&"function"==typeof(e=t.then)?e:!1},j=function(t){var e,n;this.promise=new t(function(t,o){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=o}),this.resolve=d(e),this.reject=d(n)},L=function(t){try{t()}catch(e){return{error:e}}},P=function(t,e){if(!t.n){t.n=!0;var n=t.c;g(function(){for(var o=t.v,r=1==t.s,i=0,u=function(e){var n,i,s=r?e.ok:e.fail,u=e.resolve,a=e.reject;try{s?(r||(t.h=!0),n=s===!0?o:s(o),n===e.promise?a(TypeError("Promise-chain cycle")):(i=O(n))?i.call(n,u,a):u(n)):a(o)}catch(c){a(c)}};n.length>i;)u(n[i++]);n.length=0,t.n=!1,e&&setTimeout(function(){var e,n,r=t.p;T(r)&&(x?w.emit("unhandledRejection",o,r):(e=s.onunhandledrejection)?e({promise:r,reason:o}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",o)),t.a=void 0},1)})}},T=function(t){var e,n=t._d,o=n.a||n.c,r=0;if(n.h)return!1;for(;o.length>r;)if(e=o[r++],e.fail||!T(e.promise))return!1;return!0},N=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),P(e,!0))},D=function(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{if(n.p===t)throw TypeError("Promise can't be resolved itself");(e=O(t))?g(function(){var o={r:n,d:!1};try{e.call(t,u(D,o,1),u(N,o,1))}catch(r){N.call(o,r)}}):(n.v=t,n.s=1,P(n,!1))}catch(o){N.call({r:n,d:!1},o)}}};C||(S=function(t){d(t);var e=this._d={p:h(this,S,b),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{t(u(D,e,1),u(N,e,1))}catch(n){N.call(e,n)}},n(65)(S.prototype,{then:function(t,e){var n=new j(y(this,S)),o=n.promise,r=this._d;return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,r.c.push(n),r.a&&r.a.push(n),r.s&&P(r,!1),o},"catch":function(t){return this.then(void 0,t)}})),c(c.G+c.W+c.F*!C,{Promise:S}),n(36)(S,b),n(66)(b),o=n(14)[b],c(c.S+c.F*!C,b,{reject:function(t){var e=new j(this),n=e.reject;return n(t),e.promise}}),c(c.S+c.F*(!C||k(!0)),b,{resolve:function(t){if(t instanceof S&&M(t.constructor,this))return t;var e=new j(this),n=e.resolve;return n(t),e.promise}}),c(c.S+c.F*!(C&&n(67)(function(t){S.all(t)["catch"](function(){})})),b,{all:function(t){var e=E(this),n=new j(e),o=n.resolve,i=n.reject,s=[],u=L(function(){p(t,!1,s.push,s);var n=s.length,u=Array(n);n?r.each.call(s,function(t,r){var s=!1;e.resolve(t).then(function(t){s||(s=!0,u[r]=t,--n||o(u))},i)}):o(u)});return u&&i(u.error),n.promise},race:function(t){var e=E(this),n=new j(e),o=n.reject,r=L(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,o)})});return r&&o(r.error),n.promise}})},function(t,e,n){var o=n(46),r=n(37)("toStringTag"),i="Arguments"==o(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=(e=Object(t))[r])?n:i?o(e):"Object"==(s=o(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var o=n(49);t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t}},function(t,e,n){var o=n(26),r=n(53),i=n(54),s=n(50),u=n(55),a=n(56);t.exports=function(t,e,n,c){var l,f,d,h=a(t),p=o(n,c,e?2:1),v=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(i(h))for(l=u(t.length);l>v;v++)e?p(s(f=t[v])[0],f[1]):p(t[v]);else for(d=h.call(t);!(f=d.next()).done;)r(d,p,f.value,e)}},function(t,e,n){var o=n(50);t.exports=function(t,e,n,r){try{return r?e(o(n)[0],n[1]):e(n)}catch(i){var s=t["return"];throw void 0!==s&&o(s.call(t)),i}}},function(t,e,n){var o=n(34),r=n(37)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||i[r]===t)}},function(t,e,n){var o=n(20),r=Math.min;t.exports=function(t){return t>0?r(o(t),9007199254740991):0}},function(t,e,n){var o=n(48),r=n(37)("iterator"),i=n(34);t.exports=n(14).getIteratorMethod=function(t){return void 0!=t?t[r]||t["@@iterator"]||i[o(t)]:void 0}},function(t,e,n){var o=n(7).getDesc,r=n(49),i=n(50),s=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(26)(Function.call,o(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return s(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:s}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var o=n(50),r=n(27),i=n(37)("species");t.exports=function(t,e){var n,s=o(t).constructor;return void 0===s||void 0==(n=o(s)[i])?e:r(n)}},function(t,e,n){var o,r,i,s=n(25),u=n(61).set,a=s.MutationObserver||s.WebKitMutationObserver,c=s.process,l=s.Promise,f="process"==n(46)(c),d=function(){var t,e,n;for(f&&(t=c.domain)&&(c.domain=null,t.exit());o;)e=o.domain,n=o.fn,e&&e.enter(),n(),e&&e.exit(),o=o.next;r=void 0,t&&t.enter()};if(f)i=function(){c.nextTick(d)};else if(a){var h=1,p=document.createTextNode("");new a(d).observe(p,{characterData:!0}),i=function(){p.data=h=-h}}else i=l&&l.resolve?function(){l.resolve().then(d)}:function(){u.call(s,d)};t.exports=function(t){var e={fn:t,next:void 0,domain:f&&c.domain};r&&(r.next=e),o||(o=e,i()),r=e}},function(t,e,n){var o,r,i,s=n(26),u=n(62),a=n(63),c=n(64),l=n(25),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=0,_={},m="onreadystatechange",y=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},g=function(t){y.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++v]=function(){u("function"==typeof t?t:Function(t),e)},o(v),v},h=function(t){delete _[t]},"process"==n(46)(f)?o=function(t){f.nextTick(s(y,t,1))}:p?(r=new p,i=r.port2,r.port1.onmessage=g,o=s(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(o=function(t){l.postMessage(t+"","*")},l.addEventListener("message",g,!1)):o=m in c("script")?function(t){a.appendChild(c("script"))[m]=function(){a.removeChild(this),y.call(t)}}:function(t){setTimeout(s(y,t,1),0)}),t.exports={set:d,clear:h}},function(t,e){t.exports=function(t,e,n){var o=void 0===n;switch(e.length){case 0:return o?t():t.call(n);case 1:return o?t(e[0]):t.call(n,e[0]);case 2:return o?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return o?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return o?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){t.exports=n(25).document&&document.documentElement},function(t,e,n){var o=n(49),r=n(25).document,i=o(r)&&o(r.createElement);t.exports=function(t){return i?r.createElement(t):{}}},function(t,e,n){var o=n(28);t.exports=function(t,e){for(var n in e)o(t,n,e[n]);return t}},function(t,e,n){"use strict";var o=n(14),r=n(7),i=n(31),s=n(37)("species");t.exports=function(t){var e=o[t];i&&e&&!e[s]&&r.setDesc(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var o=n(37)("iterator"),r=!1;try{var i=[7][o]();i["return"]=function(){r=!0},Array.from(i,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var i=[7],s=i[o]();s.next=function(){n=!0},i[o]=function(){return s},t(i)}catch(u){}return n}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(69),i=o(r),s=n(3),u=o(s),a=n(4),c=o(a),l=n(74),f=o(l),d=n(83),h=o(d),p=n(87),v=o(p),_=function(t){function e(t){(0,u["default"])(this,e);var n=(0,f["default"])(this,(0,i["default"])(e).call(this,t));return n._contacts=[],n.on("click",n._onClick.bind(n)),n}return(0,h["default"])(e,t),(0,c["default"])(e,[{key:"showContent",value:function(t){this._fillContactList(t),this._renderContent()}},{key:"updateContactsOnline",value:function(t){var e=this;t instanceof Array||(t=[t]),t.forEach(function(t){e._updateContact(t,"online")}),this._contacts.sort(this._compareContacts),this._renderContent()}},{key:"updateContactOffline",value:function(t){this._updateContact(t,"offline"),this._contacts.sort(this._compareContacts),this._renderContent()}},{key:"_onClick",value:function(t){var e=t.target.closest("span");e&&this._trigger("contactWasClicked",{contactName:e.textContent})}},{key:"_fillContactList",value:function(t){var e=this;JSON.parse(t).sort().forEach(function(t){e._contacts.push({name:t,status:"offline"})})}},{key:"_renderContent",value:function(){var t=this;this._el.innerHTML="<ul></ul>",this._contacts.forEach(function(e){t.addContact(e)})}},{key:"_updateContact",value:function(t,e){for(var n=!1,o=0;o<this._contacts.length;o++)this._contacts[o].name===t&&(this._contacts[o].status=e,n=!0);n||this._contacts.push({name:t,status:e})}},{key:"_compareContacts",value:function(t,e){return t.status!==e.status?"online"===t.status?-1:1:t.name.toLowerCase()>e.name.toLowerCase()}},{key:"addContact",value:function(t){var e=this._el.querySelector("ul"),n='<li class="'+t.status+'"><span>'+t.name+"</span></li>\n";e.insertAdjacentHTML("beforeEnd",n)}}]),e}(v["default"]);e["default"]=_},function(t,e,n){t.exports={"default":n(70),__esModule:!0}},function(t,e,n){n(71),t.exports=n(14).Object.getPrototypeOf},function(t,e,n){var o=n(72);n(73)("getPrototypeOf",function(t){return function(e){return t(o(e))}})},function(t,e,n){var o=n(21);t.exports=function(t){return Object(o(t))}},function(t,e,n){var o=n(24),r=n(14),i=n(32);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),o(o.S+o.F*i(function(){n(1)}),"Object",s)}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(75),i=o(r);e["default"]=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,i["default"])(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";var o=n(76)["default"];e["default"]=function(t){return t&&t.constructor===o?"symbol":typeof t},e.__esModule=!0},function(t,e,n){t.exports={"default":n(77),__esModule:!0}},function(t,e,n){n(78),n(17),t.exports=n(14).Symbol},function(t,e,n){"use strict";var o=n(7),r=n(25),i=n(33),s=n(31),u=n(24),a=n(28),c=n(32),l=n(38),f=n(36),d=n(39),h=n(37),p=n(79),v=n(80),_=n(81),m=n(82),y=n(50),g=n(44),b=n(30),w=o.getDesc,x=o.setDesc,S=o.create,k=v.get,C=r.Symbol,M=r.JSON,E=M&&M.stringify,O=!1,j=h("_hidden"),L=o.isEnum,P=l("symbol-registry"),T=l("symbols"),N="function"==typeof C,D=Object.prototype,F=s&&c(function(){return 7!=S(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a})?function(t,e,n){var o=w(D,e);o&&delete D[e],x(t,e,n),o&&t!==D&&x(D,e,o)}:x,A=function(t){var e=T[t]=S(C.prototype);return e._k=t,s&&O&&F(D,t,{configurable:!0,set:function(e){i(this,j)&&i(this[j],t)&&(this[j][t]=!1),F(this,t,b(1,e))}}),e},q=function(t){return"symbol"==typeof t},I=function(t,e,n){return n&&i(T,e)?(n.enumerable?(i(t,j)&&t[j][e]&&(t[j][e]=!1),n=S(n,{enumerable:b(0,!1)})):(i(t,j)||x(t,j,b(1,{})),t[j][e]=!0),F(t,e,n)):x(t,e,n)},W=function(t,e){y(t);for(var n,o=_(e=g(e)),r=0,i=o.length;i>r;)I(t,n=o[r++],e[n]);return t},H=function(t,e){return void 0===e?S(t):W(S(t),e)},B=function(t){var e=L.call(this,t);return e||!i(this,t)||!i(T,t)||i(this,j)&&this[j][t]?e:!0},J=function(t,e){var n=w(t=g(t),e);return!n||!i(T,e)||i(t,j)&&t[j][e]||(n.enumerable=!0),n},K=function(t){for(var e,n=k(g(t)),o=[],r=0;n.length>r;)i(T,e=n[r++])||e==j||o.push(e);return o},V=function(t){for(var e,n=k(g(t)),o=[],r=0;n.length>r;)i(T,e=n[r++])&&o.push(T[e]);return o},R=function(t){if(void 0!==t&&!q(t)){for(var e,n,o=[t],r=1,i=arguments;i.length>r;)o.push(i[r++]);return e=o[1],"function"==typeof e&&(n=e),!n&&m(e)||(e=function(t,e){return n&&(e=n.call(this,t,e)),q(e)?void 0:e}),o[1]=e,E.apply(M,o)}},U=c(function(){var t=C();return"[null]"!=E([t])||"{}"!=E({a:t})||"{}"!=E(Object(t))});N||(C=function(){if(q(this))throw TypeError("Symbol is not a constructor");return A(d(arguments.length>0?arguments[0]:void 0))},a(C.prototype,"toString",function(){return this._k}),q=function(t){return t instanceof C},o.create=H,o.isEnum=B,o.getDesc=J,o.setDesc=I,o.setDescs=W,o.getNames=v.get=K,o.getSymbols=V,s&&!n(23)&&a(D,"propertyIsEnumerable",B,!0));var G={"for":function(t){return i(P,t+="")?P[t]:P[t]=C(t)},keyFor:function(t){return p(P,t)},useSetter:function(){O=!0},useSimple:function(){O=!1}};o.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=h(t);G[t]=N?e:A(e)}),O=!0,u(u.G+u.W,{Symbol:C}),u(u.S,"Symbol",G),u(u.S+u.F*!N,"Object",{create:H,defineProperty:I,defineProperties:W,getOwnPropertyDescriptor:J,getOwnPropertyNames:K,getOwnPropertySymbols:V}),M&&u(u.S+u.F*(!N||U),"JSON",{stringify:R}),f(C,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){var o=n(7),r=n(44);t.exports=function(t,e){for(var n,i=r(t),s=o.getKeys(i),u=s.length,a=0;u>a;)if(i[n=s[a++]]===e)return n}},function(t,e,n){var o=n(44),r=n(7).getNames,i={}.toString,s="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return r(t)}catch(e){return s.slice()}};t.exports.get=function(t){return s&&"[object Window]"==i.call(t)?u(t):r(o(t))}},function(t,e,n){var o=n(7);t.exports=function(t){var e=o.getKeys(t),n=o.getSymbols;if(n)for(var r,i=n(t),s=o.isEnum,u=0;i.length>u;)s.call(t,r=i[u++])&&e.push(r);return e}},function(t,e,n){var o=n(46);t.exports=Array.isArray||function(t){return"Array"==o(t)}},function(t,e,n){"use strict";var o=n(9)["default"],r=n(84)["default"];e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=o(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r?r(t,e):t.__proto__=e)},e.__esModule=!0},function(t,e,n){t.exports={"default":n(85),__esModule:!0}},function(t,e,n){n(86),t.exports=n(14).Object.setPrototypeOf},function(t,e,n){var o=n(24);o(o.S,"Object",{setPrototypeOf:n(57).set})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=o(r),s=n(4),u=o(s),a=function(){function t(e){(0,i["default"])(this,t),this._el=e.element}return(0,u["default"])(t,[{key:"showContent",value:function(t){}},{key:"showLoadError",value:function(t){this._el.innerHTML="<h1>Error "+t.code+"</h1>"+JSON.parse(t.message)}},{key:"on",value:function(t,e){this._el.addEventListener(t,e)}},{key:"_trigger",value:function(t,e,n){n=n||{},void 0!=e&&(n.detail=e);var o=new CustomEvent(t,n);this._el.dispatchEvent(o)}}]),t}();e["default"]=a},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(69),i=o(r),s=n(3),u=o(s),a=n(4),c=o(a),l=n(74),f=o(l),d=n(83),h=o(d),p=n(87),v=o(p),_=function(t){function e(t){(0,u["default"])(this,e);var n=(0,f["default"])(this,(0,i["default"])(e).call(this,t));return n.on("click",n._onClick.bind(n)),n}return(0,h["default"])(e,t),(0,c["default"])(e,[{key:"showContent",value:function(t){var e=this;this._el.innerHTML="";var n=JSON.parse(t);n.forEach(function(t){e.addMessage(t)})}},{key:"addMessage",value:function(t){var n=e._dateParse(t.created),o=document.createElement("fieldset");o.classList.add("message");var r=document.createElement("legend");r.classList.add("messageHeader"),r.innerHTML="<b>"+t.username+"</b> <i>"+n+"</i>",o.appendChild(r);var i=document.createTextNode(t.message);o.appendChild(i),this._el.appendChild(o),this._el.scrollTop=this._el.scrollHeight}},{key:"_onClick",value:function(t){var e=t.target.closest("fieldset");e&&this._trigger("messageWasClicked",{username:e.firstElementChild.children[0].textContent,date:e.firstElementChild.children[1].textContent,message:e.lastChild.textContent})}}],[{key:"_dateParse",value:function(t){var e=void 0;try{e=new Date(t)}catch(n){e=Date.now()}var o=e.getMonth()+1,r=e.getDate(),i=e.getFullYear()%100,s=e.getHours();10>s&&(s="0"+s);var u=e.getMinutes();return 10>u&&(u="0"+s),o+"/"+r+"/"+i+" at "+s+":"+u}}]),e}(v["default"]);e["default"]=_},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(69),i=o(r),s=n(3),u=o(s),a=n(4),c=o(a),l=n(74),f=o(l),d=n(83),h=o(d),p=n(87),v=o(p),_=function(t){function e(t){(0,u["default"])(this,e);var n=(0,f["default"])(this,(0,i["default"])(e).call(this,t));return n._textField=n._el.querySelector('[data-selector="text"]'),n._sendButton=n._el.querySelector('[data-selector="sendButton"]'),n._form=n._el.querySelector('[data-selector="form"]'),n._form.addEventListener("submit",e._preventDefault),n._onKeyDown=n._onKeyDown.bind(n),n._onSubmit=n._onSubmit.bind(n),n}return(0,h["default"])(e,t),(0,c["default"])(e,[{key:"activateInput",value:function(){this._form.addEventListener("submit",this._onSubmit),this._textField.addEventListener("keydown",this._onKeyDown),this._textField.disabled=!1}},{key:"disActivateInput",value:function(){this._form.removeEventListener("submit",this._onSubmit),this._textField.removeEventListener("keydown",this._onKeyDown),this._textField.disabled=!0}},{key:"mentionContact",value:function(t){this._textField.value+="@"+t}},{key:"quoteMessage",value:function(t){this._textField.value+="@"+t.username+" "+t.date+' wrote: "'+t.message+'"'}},{key:"resetText",value:function(){this._textField.value=""}},{key:"showLoadError",value:function(){this._showNotification("This attempt to send message failed, please try again later...")}},{key:"_onSubmit",value:function(t){this._sendButton.blur();var e=this._textField.value.trim();e?this._trigger("send",{message:e}):(this._textField.value="",this._showNotification("Server doesn't accept empty messages!"))}},{key:"_onKeyDown",value:function(t){13===t.keyCode&&this._onSubmit(t)}},{key:"_showNotification",value:function(t){var e=this._textField.value,n=this._textField;n.value=t,setTimeout(function(){n.value=e},1500)}}],[{key:"_preventDefault",value:function(t){t.preventDefault()}}]),e}(v["default"]);e["default"]=_},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(69),i=o(r),s=n(3),u=o(s),a=n(4),c=o(a),l=n(74),f=o(l),d=n(83),h=o(d),p=n(87),v=o(p),_=function(t){function e(t){(0,u["default"])(this,e);var n=(0,f["default"])(this,(0,i["default"])(e).call(this,t));return n._form=n._el.querySelector('[data-selector="form"]'),n._form.addEventListener("submit",n._onSubmit.bind(n)),n._submitButton=n._el.querySelector('[data-selector="submitButton"]'),n._notificationField=n._el.querySelector('[data-selector="notification"]'),n}return(0,h["default"])(e,t),(0,c["default"])(e,[{key:"_onSubmit",value:function(t){t.preventDefault(),this._submitButton.blur();var e=this._form.login.value.trim(),n=this._form.password.value.trim();e?n?this._trigger("signIn",{username:e,password:n}):(this._form.password.value="",this._showNotification("The password mustn't be empty!")):(this._form.login.value="",
this._showNotification("The login mustn't be empty!"))}},{key:"showLoadError",value:function(t){403===t.code?this._showNotification("You've entered the wrong password!"):this._showNotification("Connection to database failed! Please try again later!")}},{key:"_showNotification",value:function(t){var e=this._notificationField.textContent,n=this._notificationField;n.textContent=t,n.classList.add("comment"),setTimeout(function(){n.textContent=e,n.classList.remove("comment")},1500)}}]),e}(v["default"]);e["default"]=_}]);
//# sourceMappingURL=chat.js.map